<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAFCJ | Mis Notas Personales</title>
    <meta name="description" content="AplicaciÃ³n de notas privada y moderna para miembros de la IAFCJ.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Plus+Jakarta+Sans:wght@300;400;600;700&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Inter:wght@300;400;600;800&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Dancing+Script:wght@400..700&family=Montserrat:wght@300;400;700&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Caveat:wght@400..700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="login-overlay" class="login-overlay">
        <div class="login-card">
            <div class="church-seal-container">
                <span class="seal-icon">ğŸ‘‘</span>
                <span class="seal-icon">ğŸ“–</span>
                <span class="seal-icon">ğŸ•Šï¸</span>
            </div>
            <h2>Acceso Privado</h2>
            <p>Iglesia ApostÃ³lica de la Fe en Cristo JesÃºs</p>
            <div class="password-group">
                <input type="password" id="app-password" placeholder="ContraseÃ±a...">
                <button id="toggle-pass" class="btn-text-tiny">Mostrar</button>
            </div>
            <button id="login-btn" class="btn-primary">Entrar</button>
            <p id="login-error" class="error-msg hidden">Clave incorrecta. IntÃ©ntalo de nuevo.</p>
        </div>
    </div>

    <div id="main-app" class="app-container hidden">
        <!-- Mobile Header -->
        <header class="mobile-nav">
            <button id="menu-toggle" class="btn-icon">â˜°</button>
            <div class="logo-small">IAFCJ</div>
            <button id="mobile-new-note" class="btn-icon-gold">+</button>
        </header>

        <div class="app-content">
            <!-- Sidebar -->
            <aside id="sidebar" class="sidebar">
                <div class="sidebar-header">
                    <div class="logo">
                        <div class="church-seal-logo">
                            <span class="mini-icon">ğŸ‘‘</span>
                            <span class="mini-icon">ğŸ“–</span>
                        </div>
                        <div class="logo-text">
                            <h1 style="font-size: 1rem;">IAFCJ</h1>
                            <span style="font-size: 0.6rem;">La Fe en Cristo JesÃºs</span>
                        </div>
                    </div>
                    <button id="new-note-btn" class="btn-primary" title="Nueva Nota">
                        <span class="icon">+</span> Nueva Nota
                    </button>
                </div>

                <div class="search-bar">
                    <input type="text" id="search-input" placeholder="Buscar notas...">
                </div>

                <div class="calendar-section">
                    <div class="section-header">
                        <span>ğŸ“… Calendario</span>
                        <div class="cal-nav">
                            <button id="prev-month" class="btn-icon-tiny" title="Mes Anterior">â€¹</button>
                            <button id="next-month" class="btn-icon-tiny" title="Mes Siguiente">â€º</button>
                        </div>
                    </div>
                    <div id="calendar-widget" class="calendar-widget">
                        <!-- Calendario dinÃ¡mico -->
                    </div>
                </div>

                <nav class="notes-list" id="notes-list">
                    <!-- Las notas se cargarÃ¡n aquÃ­ dinÃ¡micamente -->
                    <div class="empty-state">No hay notas todavÃ­a</div>
                </nav>

                <div class="categories-section bottom-aligned">
                    <div class="section-header">
                        <span>ğŸ·ï¸ CategorÃ­as</span>
                        <button id="add-category-btn" class="btn-icon-tiny" title="AÃ±adir CategorÃ­a">+</button>
                    </div>
                    <div id="categories-list" class="categories-list">
                        <!-- CategorÃ­as dinÃ¡micas -->
                    </div>
                </div>

                <div class="import-section">
                    <button id="import-note-btn" class="btn-outline-small">ğŸ“¥ Importar Nota Secreta</button>
                </div>

                <div class="sidebar-footer">
                    <button id="focus-mode-btn" class="btn-icon" title="Modo Reposo Total">ğŸ§˜</button>
                    <div id="sync-status" class="sync-status" title="Estado de SincronizaciÃ³n">
                        <span class="status-dot"></span>
                        <span class="status-text">Local</span>
                    </div>
                    <div class="user-info">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="Avatar" class="avatar">
                        <span>Usuario</span>
                    </div>
                </div>
            </aside>

            <!-- Main Editor Area -->
            <main class="editor-area">
                <div id="no-note-selected" class="no-selection">
                    <div class="hero-content">
                        <div class="church-seal-display">
                            <div class="main-seal-circle">
                                <span class="large-icon">ğŸ‘‘</span>
                                <span class="large-icon">ğŸ“–</span>
                                <span class="large-icon">ğŸ•Šï¸</span>
                            </div>
                        </div>
                        <h2>Iglesia ApostÃ³lica de la Fe en Cristo JesÃºs</h2>
                        <p>Bienvenido a tu espacio personal de escritura y reflexiÃ³n.</p>
                    </div>
                </div>

                <div id="editor-container" class="editor-container hidden">
                    <header class="editor-header">
                        <input type="text" id="note-title-input" placeholder="TÃ­tulo de la nota..." class="title-input">
                        <div class="note-meta">
                            <span id="note-date" class="date-tag">31 Ene, 2026</span>
                            <div class="editor-actions">
                                <button id="delete-note-btn" class="btn-secondary" title="Eliminar Nota">ğŸ—‘ï¸</button>
                                <button id="save-note-btn" class="btn-primary">Guardar</button>
                            </div>
                        </div>
                    </header>

                    <div class="toolbar">
                        <select id="font-family" class="tool-select" title="Tipo de Letra">
                            <optgroup label="Modernas (Sans)">
                                <option value="'Inter', sans-serif">Inter (Limpia)</option>
                                <option value="'Outfit', sans-serif">Outfit (Moderna)</option>
                                <option value="'Montserrat', sans-serif">Montserrat (GeomÃ©trica)</option>
                            </optgroup>
                            <optgroup label="ClÃ¡sicas (Serif)">
                                <option value="'EB Garamond', serif">EB Garamond (Tradicional)</option>
                                <option value="'Playfair Display', serif">Playfair (Elegante)</option>
                                <option value="'Old Standard TT', serif">Old Standard (HistÃ³rica)</option>
                            </optgroup>
                            <optgroup label="Escritura (Handwriting)">
                                <option value="'Caveat', cursive">Caveat (Firma)</option>
                                <option value="'Dancing Script', cursive">Dancing (Fluida)</option>
                            </optgroup>
                            <optgroup label="Sistema">
                                <option value="monospace">Mono (CÃ³digo)</option>
                            </optgroup>
                        </select>

                        <select id="font-size" class="tool-select" title="TamaÃ±o de Letra">
                            <option value="3">Normal</option>
                            <option value="1">Muy PequeÃ±a</option>
                            <option value="2">PequeÃ±a</option>
                            <option value="4">Grande</option>
                            <option value="5">Muy Grande</option>
                            <option value="6">TÃ­tulo</option>
                            <option value="7">Gigante</option>
                        </select>

                        <div class="separator"></div>

                        <button data-command="bold" class="tool-btn" title="Negrita"><b>B</b></button>
                        <button data-command="italic" class="tool-btn" title="Cursiva"><i>I</i></button>
                        <button data-command="underline" class="tool-btn" title="Subrayado"><u>U</u></button>

                        <div class="separator"></div>

                        <div class="color-group">
                            <label title="Color de Texto">ğŸ¨</label>
                            <input type="color" id="color-picker" class="color-picker" title="Color de texto">
                        </div>

                        <div class="color-group">
                            <label title="Resaltado">ğŸ–ï¸</label>
                            <input type="color" id="bg-color-picker" class="color-picker" title="Resaltado (Fondo)"
                                value="#ffffff">
                        </div>

                        <div class="separator"></div>

                        <button data-command="createLink" class="tool-btn" title="Insertar Enlace">ğŸ”—</button>
                        <button id="insert-table-btn" class="tool-btn" title="Insertar Tabla">ğŸ“Š</button>
                        <button data-command="insertHorizontalRule" class="tool-btn" title="LÃ­nea Divisoria">â–</button>

                        <div class="separator"></div>

                        <button data-command="insertUnorderedList" class="tool-btn">â€¢ Lista</button>
                        <button data-command="insertOrderedList" class="tool-btn">1. Lista</button>

                        <div class="separator"></div>

                        <button id="insert-image-btn" class="tool-btn" title="AÃ±adir Imagen">ğŸ–¼ï¸</button>
                        <input type="file" id="image-upload-input" accept="image/*" class="hidden">
                        <button id="camera-capture-btn" class="tool-btn" title="Tomar Foto">ğŸ“¸</button>
                        <button id="emoji-picker-btn" class="tool-btn" title="Insertar Emoji">ğŸ˜€</button>
                        <button id="voice-typing-btn" class="tool-btn" title="Dictado por Voz">ğŸ™ï¸</button>

                        <div class="separator"></div>

                        <button data-command="justifyLeft" class="tool-btn">â¬…ï¸</button>
                        <button data-command="justifyCenter" class="tool-btn">â†”ï¸</button>
                        <button data-command="justifyRight" class="tool-btn">â¡ï¸</button>

                        <div class="separator"></div>

                        <button id="export-pdf-btn" class="tool-btn" title="Exportar Nota">ğŸ“„</button>
                        <button id="share-note-btn" class="tool-btn" title="Compartir Nota Encriptada">ğŸ“¤</button>
                        <div class="separator"></div>
                        <button id="toggle-draw-btn" class="tool-btn" title="Modo Dibujar/Pintar">ğŸ¨ Dibujar</button>
                    </div>

                    <div class="drawing-toolbar hidden" id="drawing-toolbar">
                        <button class="tool-btn brush-tool active" data-tool="pencil" title="LÃ¡piz">âœï¸</button>
                        <button class="tool-btn brush-tool" data-tool="marker" title="Marcador">ğŸ–ï¸</button>
                        <button class="tool-btn brush-tool" data-tool="pen" title="Pluma">âœ’ï¸</button>
                        <button class="tool-btn brush-tool" data-tool="eraser" title="Borrador">ğŸ§¼</button>
                        <div class="separator"></div>
                        <input type="color" id="draw-color" value="#b45309" class="color-picker-small">
                        <input type="range" id="brush-size" min="1" max="30" value="3" class="brush-slider">
                        <div class="separator"></div>
                        <button id="clear-canvas" class="tool-btn">Vaciar</button>
                        <button id="download-draw" class="tool-btn" title="Descargar Dibujo">ğŸ’¾</button>
                    </div>

                    <div class="editor-view-container">
                        <canvas id="drawing-canvas" class="drawing-canvas hidden"></canvas>
                        <div id="note-content" class="rich-editor" contenteditable="true"
                            placeholder="Empieza a escribir aquÃ­..."></div>
                    </div>
            </main>
        </div>
    </div>

    <div id="focus-overlay" class="focus-overlay hidden">
        <div class="focus-content">
            <h2 class="focus-quote">Modo Enfoque</h2>
            <p>Escribe sin distracciones</p>
            <button id="exit-focus-btn" class="btn-outline">Salir</button>
        </div>
    </div>

    <!-- IA Asistente Ebed -->
    <div id="ai-assistant" class="ai-assistant">
        <div id="ai-chat-window" class="ai-chat-window hidden">
            <div class="ai-chat-header">
                <div class="ai-header-left">
                    <span class="ai-avatar-mini">ğŸ•Šï¸</span>
                    <div>
                        <div class="ai-title">Asistente Ebed</div>
                        <div class="ai-status">En lÃ­nea</div>
                    </div>
                </div>
                <button id="close-chat" class="close-chat-btn">Ã—</button>
            </div>
            <div id="ai-messages" class="ai-messages">
                <div class="ai-msg bot">Â¡Hola! Soy tu asistente. Puedo ayudarte con versÃ­culos, resÃºmenes o dudas sobre
                    las herramientas.</div>
            </div>
            <div class="ai-suggestions" id="ai-suggestions">
                <button class="ai-chip" data-query="Dame un versÃ­culo">ğŸ“– VersÃ­culo</button>
                <button class="ai-chip" data-query="Analiza mi nota">ğŸ“ Analizar</button>
                <button class="ai-chip" data-query="Â¿CÃ³mo dibujar?">ğŸ¨ Ayuda</button>
            </div>
            <div class="ai-chat-input">
                <input type="text" id="ai-input" placeholder="Pregunta algo...">
                <button id="send-ai-msg">ï¿½</button>
            </div>
        </div>
        <button id="toggle-ai-chat" class="ai-fab" title="Asistente de IA">
            <span>âœ¨</span>
        </button>
    </div>

    <!-- Firebase SDK (v9 Compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script src="script.js"></script>
</body>

</html>